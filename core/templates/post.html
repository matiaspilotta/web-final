{% extends 'base.html' %}
{% load static %}

{% block content %}
  <link rel="stylesheet" type="text/css" href="{% static 'core/css/post.css' %}">
  <div class="container">
    <div class="posts">
      <!-- Tu contenido de publicaciones aquÃ­ -->
      {% for post in posts %}
        <div class="post">
          <img src="{{ post.image.url }}" alt="{{ post.caption }}">
          <div class="post-info">
            <p>Usuario: {{ post.user.username }}</p>
            <p>{{ post.caption }}</p>
            <p class="timestamp">{{ post.created_at }}</p>
            <button>Eliminar</button>
            <button>Editar</button>

            <h3>Comentarios</h3>
            <ul>
              {% for comment in post.comments.all %}
                <li>{{ comment.user.username }}: {{ comment.text }}</li>
              {% endfor %}
            </ul>

            <!-- Formulario de comentarios -->
            {% if user.is_authenticated %}
            <form method="post" action="{% url 'add_comment' post.id %}">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <button type="submit">Comentar</button>
            </form>
        {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="sidebar">
      <h2>Usuarios</h2>
      <ul>
        {% for user in users %}
          <li><a href="{% url 'user_posts' user.user.username %}">{{ user.user.username }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
{% endblock %}
